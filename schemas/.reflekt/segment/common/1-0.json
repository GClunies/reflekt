{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": ".reflekt/segment/common/1-0.json",
    "description": "Schema for Segment common fields. See Segment docs for more info: https://segment.com/docs/connections/spec/common/",
    "self": {
        "vendor": "reflekt",
        "name": "common",
        "format": "jsonschema",
        "version": "1-0"
    },
    "type": "object",
    "properties": {
        "messageId": {
            "type": "string",
            "description": "Unique identifier for the message collected by the Segment call [identify(), group(), page(), screen(), track()]. Automatically generated by the Segment tracking libraries."
        },
        "eventText": {
            "type": "string",
            "description": "Name of the event."
        },
        "originalTimestamp": {
            "type": "string",
            "description": "Time on the client device when call was invoked; OR The timestamp value manually passed in through server-side libraries. originalTimestamp is not useful for analysis since it’s not always trustworthy as it can be easily adjusted and affected by clock skew."
        },
        "sentAt": {
            "type": "string",
            "description": "Timestamp of when a message is sent to Segment, used for clock skew correction. It is set automatically by the Segment tracking libraries. sentAt is not useful for analysis since it’s not always trustworthy as it can be easily adjusted and affected by clock skew."
        },
        "receivedAt": {
            "type": "string",
            "description": "Automatically set by Segment, the timestamp of when a message is received by Segment. It is set automatically by the Segment tracking libraries. Used as sort key in Warehouses when loading raw data."
        },
        "timestamp": {
            "type": "string",
            "description": "Timestamp when the message itself took place, defaulted to the current time by the Segment Tracking API. Used by Segment to send to downstream destinations, and used for historical replays. Recommended timestamp for analysis when chronology does matter."
        },
        "type": {
            "type": "string",
            "description": "Type of message, corresponding to the API method: 'identify', 'group', 'track', 'page', 'screen' or 'alias'.",
            "enum": ["identify", "group", "track", "page", "screen", "alias"]
        },
        "anonymousId": {
            "type": "string",
            "description": "A pseudo-unique substitute for a User ID, for cases when you don’t have an absolutely unique identifier. A userId or an anonymousId is required. See the Identities docs for more details."
        },
        "userId": {
            "type": "string",
            "description": "Unique identifier for the user in your database. A userId or an anonymousId is required. See the Identities docs for more details."
        },
        "context": {
            "type": "object",
            "properties": {
                "active": {
                    "type": "boolean",
                    "description": "Whether a user is active. This is usually used to flag an .identify() call to just update the traits but not “last seen.”"
                },
                "app": {
                    "type": "object",
                    "description": "Dictionary of information about the current application, containing name, version, and build. This is collected automatically from the mobile libraries when possible.",
                    "properties": {
                        "name": {
                            "type": "string",
                            "description": "The name of the application."
                        },
                        "version": {
                            "type": "string",
                            "description": "The version of the application."
                        },
                        "build": {
                            "type": "string",
                            "description": "The build of the application."
                        }
                    }
                },
                "campaign": {
                    "type": "object",
                    "description": "Dictionary of information about the campaign that resulted in the API call, containing: name, source, medium, term, content, and any other custom UTM parameter. This maps directly to the common UTM campaign parameters.",
                    "properties": {
                        "name": {
                            "type": "string",
                            "description": "The name of the campaign."
                        },
                        "source": {
                            "type": "string",
                            "description": "The source of the campaign."
                        },
                        "medium": {
                            "type": "string",
                            "description": "The medium of the campaign."
                        }
                    }
                },
                "device": {
                    "type": "object",
                    "description": "Dictionary of information about the device, containing: id, advertisingId, manufacturer, model, name, type, and version."
                },
                "ip": {
                    "type": "string",
                    "description": "Current user’s IP address."
                },
                "library": {
                    "type": "object",
                    "description": "Dictionary of information about the library making the requests to the API, containing: name and version.",
                    "properties": {
                        "name": {
                            "type": "string",
                            "description": "The name of the library."
                        },
                        "version": {
                            "type": "string",
                            "description": "The version of the library."
                        }
                    }
                },
                "locale": {
                    "type": "string",
                    "description": "Locale string for the current user, for example en-US."
                },
                "location": {
                    "type": "object",
                    "description": "Dictionary of information about the user’s current location, containing: city, country, latitude, longitude, region, and speed.",
                    "properties": {
                        "city": {
                            "type": "string",
                            "description": "The city of the user's current location."
                        },
                        "country": {
                            "type": "string",
                            "description": "The country of the user's current location."
                        },
                        "latitude": {
                            "type": "number",
                            "description": "The latitude of the user's current location."
                        },
                        "longitude": {
                            "type": "number",
                            "description": "The longitude of the user's current location."
                        },
                        "postalCode": {
                            "type": "string",
                            "description": "The postal code of the user's current location."
                        },
                        "region": {
                            "type": "string",
                            "description": "The region of the user's current location."
                        },
                        "speed": {
                            "type": "number",
                            "description": "The current speed of the user"
                        }
                    }
                },
                "network": {
                    "type": "object",
                    "description": "Dictionary of information about the current network connection, containing: bluetooth, carrier, cellular, and wifi.",
                    "properties": {
                        "bluetooth": {
                            "type": "boolean",
                            "description": "Whether the device has bluetooth enabled."
                        },
                        "carrier": {
                            "type": "string",
                            "description": "The carrier of the device."
                        },
                        "cellular": {
                            "type": "boolean",
                            "description": "Whether the device has cellular enabled."
                        },
                        "wifi": {
                            "type": "boolean",
                            "description": "Whether the device has wifi enabled."
                        }
                    }
                },
                "os": {
                    "type": "object",
                    "description": "Dictionary of information about the operating system, containing name and version.",
                    "properties": {
                        "name": {
                            "type": "string",
                            "description": "The name of the operating system."
                        },
                        "version": {
                            "type": "string",
                            "description": "The version of the operating system."
                        }
                    }
                },
                "page": {
                    "type": "object",
                    "description": "Dictionary of information about the current page in the browser, containing: path, referrer, search, title and url. This is automatically collected by Analytics.js.",
                    "properties": {
                        "path": {
                            "type": "string",
                            "description": "The path of the current page."
                        },
                        "referrer": {
                            "type": "string",
                            "description": "The referrer of the current page."
                        },
                        "search": {
                            "type": "string",
                            "description": "The search query of the current page."
                        },
                        "title": {
                            "type": "string",
                            "description": "The title of the current page."
                        },
                        "url": {
                            "type": "string",
                            "description": "The url of the current page."
                        }
                    }
                },
                "referrer": {
                    "type": "object",
                    "description": "Dictionary of information about the way the user was referred to the website or app, containing: type, name, url, and link.",
                    "properties": {
                        "type": {
                            "type": "string",
                            "description": "The type of the referrer."
                        },
                        "name": {
                            "type": "string",
                            "description": "The name of the referrer."
                        },
                        "url": {
                            "type": "string",
                            "description": "The url of the referrer."
                        },
                        "link": {
                            "type": "string",
                            "description": "The link of the referrer."
                        }
                    }
                },
                "screen": {
                    "type": "object",
                    "description": "Dictionary of information about the device’s screen, containing: density, height, and width.",
                    "properties": {
                        "density": {
                            "type": "number",
                            "description": "The density of the screen."
                        },
                        "height": {
                            "type": "number",
                            "description": "The height of the screen."
                        },
                        "width": {
                            "type": "number",
                            "description": "The width of the screen."
                        }
                    }
                },
                "timezone": {
                    "type": "string",
                    "description": "Timezones are sent as tzdata strings to add user timezone information which might be stripped from the timestamp, for example America/New_York."
                },
                "groupId": {
                    "type": "string",
                    "description": "Group / Account ID. This is useful in B2B use cases where you need to attribute your non-group calls to a company or account. It is relied on by several Customer Success and CRM tools."
                },
                "traits": {
                    "description": "Dictionary of traits of the current user. This is useful in cases where you need to track an event, but also associate information from a previous identify call. You should fill this object the same way you would fill traits in an identify call."
                },
                "user_agent": {
                    "type": "string",
                    "description": "User agent of the device making the request."
                }
            }
        },
        "integrations": {
            "type": "object",
            "description": "Dictionary of destinations to either enable or disable See the Destinations field docs for more details."
        },
        "version": {
            "type": "string",
            "description": "Version of the Tracking API that received the message, automatically set by Segment."
        }
    }
}

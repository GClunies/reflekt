{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "segment/surfline-web/Checkout Session Expired/1-0.json",
    "description": "Server side event fired when a Stripe Checkout Session expires. Session Object Reference - https://stripe.com/docs/api/checkout/sessions/object",
    "self": {
        "vendor": "com.reflekt-ci",
        "name": "Checkout Session Expired",
        "format": "jsonschema",
        "version": "1-0"
    },
    "metadata": {
        "fires_on": "server",
        "owner": "@Surfline/squad-subscription",
        "priority": 1
    },
    "type": "object",
    "properties": {
        "afterExpiration": {
            "description": "When set provides configuration for actions to take if this Checkout Session expires.",
            "type": [
                "string",
                "null"
            ]
        },
        "allowPromotionCodes": {
            "description": "Enables user redeemable promotion codes.",
            "type": [
                "boolean",
                "null"
            ]
        },
        "amountSubtotal": {
            "description": "Total of all items before discounts or taxes are applied.",
            "type": "number"
        },
        "amountTotal": {
            "description": "Total of all items after discounts and taxes are applied.",
            "type": "number"
        },
        "cancelUrl": {
            "description": "The URL the customer will be directed to after the payment or subscription creation is cancelled.",
            "type": "string"
        },
        "clientReferenceId": {
            "description": "WaveTrak UserInfo Id.",
            "type": "string"
        },
        "currency": {
            "description": "Three-letter ISO currency code.",
            "pattern": "[A-Z]",
            "type": "string"
        },
        "customer": {
            "description": "The ID of the customer for the Checkout Session.",
            "type": "string"
        },
        "customerEmail": {
            "description": "The email of the customer.",
            "type": "string"
        },
        "locale": {
            "description": "The IETF language tag of the locale Checkout is displayed in.",
            "type": [
                "string",
                "null"
            ]
        },
        "metadata": {
            "description": "Metadata assosciated with the Stripe Checkout session.",
            "properties": {
                "brand": {
                    "description": "The brand assosciated with the session.",
                    "type": [
                        "string"
                    ]
                },
                "priceId": {
                    "description": "Price id associated with the product.",
                    "type": [
                        "string"
                    ]
                }
            },
            "required": [],
            "type": "object"
        },
        "mode": {
            "description": "The mode of the Checkout Session.",
            "enum": [
                "payment",
                "setup",
                "subscription"
            ],
            "type": "string"
        },
        "paymentIntent": {
            "description": "The ID of the PaymentIntent for Checkout Sessions in payment mode.",
            "type": [
                "string",
                "null"
            ]
        },
        "paymentStatus": {
            "description": "The payment status of the Checkout Session.",
            "enum": [
                "paid",
                "unpaid",
                "no_payment_required"
            ],
            "type": "string"
        },
        "recoveredFrom": {
            "description": "The ID of the original expired Checkout Session that triggered the recovery flow.",
            "type": [
                "string",
                "null"
            ]
        },
        "setupIntent": {
            "description": "The ID of the SetupIntent for Checkout Sessions in setup mode.",
            "type": [
                "string",
                "null"
            ]
        },
        "successUrl": {
            "description": "The URL the customer will be directed to after the payment or subscription creation is successful.",
            "type": "string"
        }
    },
    "required": [
        "amountSubtotal",
        "amountTotal",
        "cancelUrl",
        "clientReferenceId",
        "currency",
        "mode",
        "paymentStatus",
        "successUrl"
    ],
    "additionalProperties": false,
    "metrics": {
        "dimensions": [],
        "measures": []
    }
}